{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Bullet.js","webpack:///./src/js/Camera.js","webpack:///./src/js/Collider.js","webpack:///./src/js/Enemy.js","webpack:///./src/js/Game.js","webpack:///./src/js/Keyboard.js","webpack:///./src/js/Light.js","webpack:///./src/js/Rock.js","webpack:///./src/js/Scoreboard.js","webpack:///./src/js/SpriteSet.js","webpack:///./src/js/entities.js","webpack:///./src/js/loaders.js","webpack:///./src/js/main.js","webpack:///./src/js/math.js","webpack:///./src/js/specs.js"],"names":["Bullet","x","y","dir","speed","startX","pos","range","collided","allowUpdate","active","Math","abs","setTimeout","ctx","camera","beginPath","fillStyle","arc","PI","closePath","fill","Camera","size","beetween","val","start","end","map","sb","light","game","rocks","bullets","enemies","Collider","imgsrc","m","s","l","g","r","b","e","collisionMap","document","createElement","img","Image","src","width","height","getContext","drawImage","context","flags","torches","whip","cross","torchpos","positions","attacking","vert","hori","rope","collected","forEach","rock","center","takeHp","bullet","takeLive","enemy","dead","console","log","kill","updateScore","fillRect","setWhips","addCross","flag","i","addTorch","resetTimeout","p","getImageData","parseInt","data","color","score","setEnemySprite","sprite","define","Enemy","shootDir","draw","Game","spriteSheet","imgs","scoreboard","indie","window","gravity","push","getBullet","collider","bg","playing","play","images","canvas","this_","vel","set","setInterval","el","update","focus","render","alpha","hp","lives","needsUpdate","requestAnimationFrame","win","msg","endScreen","fillText","Keyboard","keyStates","Map","listeners","key","code","has","preventDefault","keyState","type","get","addEventListener","eName","handleEvent","listener","Light","timeout","updateAlpha","resetAlpha","clearTimeout","Rock","startY","alllowUpdate","Scoreboard","whips","sbctx","offset","font","toString","n","length","SpriteSet","image","sprites","name","t","buffer","reverse","translate","scale","spec","frames","f","createIndie","defineAnim","run","climb","attack","input","ropeMode","crouching","listenTo","setListener","jumping","attackingtimestamp","Date","now","distance","resistance","collisionPoints","updateCollisionPoints","lastDir","collision","check","ropeDistance","resolveFrame","len","floor","xDir","startsWith","loadImage","url","Promise","resolve","IMAGES","getElementById","all","then","logo","scbrd","coll","textAlign","text","ts","startScreen","cancelAnimationFrame","gameImgs","Vec2","specs"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/main.js\");\n","import {\r\n    Vec2\r\n} from \"./math\";\r\n\r\nexport default class Bullet {\r\n    constructor(x, y, dir, speed = 2) {\r\n        this.startX = x;\r\n        this.pos = new Vec2(x, y);\r\n        this.range = 150;\r\n        this.dir = dir;\r\n        this.speed = speed;\r\n        this.collided = false;\r\n        this.allowUpdate = true;\r\n        this.active = true;\r\n    }\r\n    update() {\r\n        if (this.allowUpdate) {\r\n            if (Math.abs(this.startX - this.pos.x) > this.range || this.collided) {\r\n                this.pos.x = this.startX;\r\n                this.allowUpdate = false;\r\n                this.collided = false;\r\n                setTimeout(() => {\r\n                    this.allowUpdate = true;\r\n                }, 2000);\r\n            } else this.pos.x += this.speed * this.dir;\r\n        }\r\n\r\n    }\r\n    draw(ctx, camera) {\r\n        if (this.allowUpdate) {\r\n            if (((this.pos.y - camera.pos.y) * 2) < 250) {\r\n                ctx.beginPath();\r\n                ctx.fillStyle = \"gold\";\r\n                ctx.arc(\r\n                    (this.pos.x - camera.pos.x) * 2,\r\n                    (this.pos.y - camera.pos.y) * 2,\r\n                    3, 0, 2 * Math.PI\r\n                )\r\n                ctx.closePath()\r\n                ctx.fill()\r\n            }\r\n        }\r\n    }    \r\n}","import {\r\n    Vec2\r\n} from \"./math\";\r\n\r\nexport default class Camera {\r\n    constructor() {\r\n        this.pos = new Vec2(0, 0);\r\n        this.size = new Vec2(2115 - 320, 709 - 125);\r\n    }\r\n    focus(pos, dir) {    \r\n        if (dir.x > 0) {\r\n            if(pos.x - this.pos.x >= 200) this.pos.x = pos.x - 200;\r\n        } else if (dir.x < 0){\r\n            if(pos.x - this.pos.x <= 100) this.pos.x = pos.x - 100;\r\n        }        \r\n        this.pos.y = pos.y - 25;\r\n    }\r\n    check() {\r\n        if (this.pos.x > this.size.x) this.pos.x = this.size.x;\r\n        if (this.pos.y > this.size.y) this.pos.y = this.size.y;\r\n        if (this.pos.x < 0) this.pos.x = 0;\r\n        if (this.pos.y < 0) this.pos.y = 0;\r\n    }\r\n}","function beetween(val, start, end) {\r\n    return (val > start && val < end);\r\n}\r\nlet map, sb, light, game, rocks, bullets, enemies;\r\nexport default class Collider {\r\n    constructor(imgsrc, m, s, l, g, r, b, e) {\r\n        rocks = r;\r\n        bullets = b;\r\n        map = m;\r\n        sb = s;\r\n        light = l;\r\n        game = g;\r\n        enemies = e;\r\n        this.collisionMap = document.createElement(\"canvas\");\r\n        const img = new Image();\r\n        img.src = \"images/\" + imgsrc;\r\n        this.collisionMap.width = img.width;\r\n        this.collisionMap.height = img.height;\r\n        this.collisionMap.getContext(\"2d\").drawImage(\r\n            img,\r\n            0, 0,\r\n            this.collisionMap.width, this.collisionMap.height);\r\n        this.context = this.collisionMap.getContext(\"2d\");\r\n        this.flags = {\r\n            torches: [true, true, true],\r\n            whip: true,\r\n            cross: true\r\n        }\r\n        this.torchpos = [{\r\n                x: 550,\r\n                y: 610\r\n            },\r\n            {\r\n                x: 263,\r\n                y: 98\r\n            },\r\n            {\r\n                x: 1785,\r\n                y: 675\r\n            }\r\n        ]\r\n    }\r\n    check(positions, attacking) {\r\n        let vert = false;\r\n        let hori = false;\r\n        let rope = false;\r\n        let collected = false;\r\n\r\n        rocks.forEach(rock => {\r\n            if (!rock.collided) {\r\n                if (beetween(rock.pos.x, positions.center.x - 5, positions.center.x + 5)) {\r\n                    if (beetween(rock.pos.y, positions.center.y - 12, positions.center.y + 12)) {\r\n                        rock.collided = true;\r\n                        sb.takeHp();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        bullets.forEach(bullet => {\r\n            if (!bullet.collided && bullet.active) {\r\n                if (beetween(bullet.pos.y, positions.center.y - 20, positions.center.y + 20)) {\r\n                    if (beetween(bullet.pos.x, positions.center.x - 12, positions.center.x + 12)) {\r\n                        bullet.collided = true;\r\n\r\n                        sb.takeLive();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (attacking) {\r\n            enemies.forEach(enemy => {\r\n                if (!enemy.dead) {\r\n                    if (beetween(enemy.pos.x, positions.center.x - 70, positions.center.x + 70)) {\r\n                        console.log(enemy.pos, positions.center);\r\n                        if (Math.abs(positions.center.y - (enemy.pos.y)) < 70) {\r\n                            enemy.kill();\r\n                            sb.updateScore(300);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (this.flags.whip) {\r\n            if (beetween(positions.center.y, 675, 690)) {\r\n                if (beetween(positions.center.x, 450, 470)) {\r\n                    collected = \"whip\";\r\n                    map.getContext(\"2d\").fillStyle = \"black\";\r\n                    map.getContext(\"2d\").fillRect(450, 675, 20, 20)\r\n                    sb.setWhips(5);\r\n                    this.flags.whip = false;\r\n                    sb.updateScore(200);\r\n                }\r\n            }\r\n        }\r\n        if (this.flags.cross) {\r\n            if (beetween(positions.center.y, 435, 455)) {\r\n                if (beetween(positions.center.x, 880, 900)) {\r\n                    collected = \"cross\";\r\n                    sb.addCross(map)\r\n                    map.getContext(\"2d\").fillStyle = \"black\";\r\n                    map.getContext(\"2d\").fillRect(880, 435, 20, 20)\r\n                    this.flags.cross = false;\r\n                    sb.updateScore(500);\r\n\r\n                }\r\n            }\r\n        }\r\n        this.flags.torches.forEach((flag, i) => {\r\n            if (flag) {\r\n                if (beetween(positions.center.y, this.torchpos[i].y, this.torchpos[i].y + 20)) {\r\n                    if (beetween(positions.center.x, this.torchpos[i].x, this.torchpos[i].x + 20)) {\r\n                        collected = \"torch\";\r\n                        sb.addTorch(map, this.torchpos[i]);\r\n                        map.getContext(\"2d\").fillStyle = \"black\";\r\n                        map.getContext(\"2d\").fillRect(this.torchpos[i].x, this.torchpos[i].y, 20, 20)\r\n                        this.flags.torches[i] = false;\r\n                        light.resetTimeout();\r\n                        sb.updateScore(100);\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n\r\n        for (const pos of positions.y) {\r\n            let p = this.context.getImageData(parseInt(pos.x), parseInt(pos.y), 1, 1).data;\r\n            const color = p[0] + \" \" + p[1] + \" \" + p[2] + \" \" + p[3];\r\n            if (p[3] === 255) {\r\n                if (color === \"255 255 255 255\") {\r\n                    return {\r\n                        x: hori,\r\n                        y: vert,\r\n                        rope: true\r\n                    };\r\n\r\n                }\r\n                if (color === \"0 0 0 255\") {\r\n                    vert = true;\r\n                    break;\r\n                }\r\n                if (color === \"237 119 15 255\") {\r\n                    vert = true;\r\n                    break;\r\n                }\r\n                if (color === \"255 0 0 255\") {\r\n                    game.end(false, sb.score);\r\n                    break;\r\n                }\r\n                if (color === \"0 255 0 255\") {\r\n                    if (!this.flags.cross) game.end(true, sb.score);\r\n                    else {\r\n                        vert = true;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n        for (const pos of positions.x) {\r\n            let p = this.context.getImageData(pos.x, pos.y, 1, 1).data;\r\n            const color = p[0] + \" \" + p[1] + \" \" + p[2] + \" \" + p[3];\r\n            if (p[3] === 255) {\r\n\r\n                if (color === \"255 255 255 255\") {\r\n                    return {\r\n                        x: hori,\r\n                        y: vert,\r\n                        rope: true\r\n                    };\r\n\r\n                }\r\n                if (color === \"0 0 0 255\") {\r\n                    hori = true;\r\n                    break;\r\n                }\r\n                if (color === \"237 119 15 255\") {\r\n                    hori = true;\r\n                    break;\r\n                }\r\n                if (color === \"255 0 0 255\") {\r\n                    game.end(false, sb.score);\r\n                    break;\r\n                }\r\n                if (color === \"0 255 0 255\") {\r\n                    if (!this.flags.cross) game.end(true, sb.score);\r\n                    else {\r\n                        hori = true;\r\n                    }\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n        return {\r\n            x: hori,\r\n            y: vert,\r\n            rope: rope,\r\n            collected: collected\r\n        }\r\n    }\r\n}","import {\r\n    Vec2\r\n} from \"./math\";\r\nimport SpriteSet from \"./SpriteSet\";\r\nimport Bullet from \"./Bullet\";\r\n\r\nlet sprite;\r\nexport function setEnemySprite(img) {\r\n    sprite = new SpriteSet(img, 30, 50);\r\n    sprite.define(\"idle\", 0, 0, 30, 50)\r\n}\r\n\r\nexport default class Enemy {\r\n    constructor(x = 0, y = 0, shootDir) {\r\n        this.pos = new Vec2(x, y);\r\n        this.size = new Vec2(30, 50);\r\n        this.dir = shootDir;\r\n        this.dead = false;\r\n        this.bullet = new Bullet(x + (shootDir == -1 ? 5 : 10), y + 10, shootDir, 2);\r\n    }\r\n    getBullet() {\r\n        return this.bullet\r\n    }\r\n    draw(ctx, camera) {\r\n        if (((this.pos.y - camera.pos.y) * 2) < 200) {            \r\n            sprite.draw(\"idle\", ctx, (this.pos.x - camera.pos.x) * 2, (this.pos.y - camera.pos.y) * 2, this.dir == -1);\r\n        }\r\n    }\r\n    kill(){\r\n        this.dead = true;\r\n        this.bullet.active = false;\r\n    }\r\n}","import {\r\n    createIndie\r\n} from \"./entities.js\";\r\nimport Camera from \"./Camera.js\";\r\nimport Collider from \"./Collider.js\";\r\nimport Light from \"./Light.js\";\r\nimport Scoreboard from \"./Scoreboard.js\";\r\nimport Rock from \"./Rock.js\";\r\nimport Enemy, {\r\n    setEnemySprite\r\n} from \"./Enemy.js\";\r\n\r\n\r\nexport default class Game {\r\n    constructor(spriteSheet, imgs) {\r\n        const scoreboard = new Scoreboard(imgs.score);\r\n        scoreboard.setWhips(0);\r\n        const indie = createIndie(spriteSheet, scoreboard);\r\n        window.indie = indie;\r\n        const gravity = 0.3;\r\n        const camera = new Camera();\r\n\r\n\r\n        const light = new Light();\r\n        const rocks = [new Rock(400, 660, 40, 1), new Rock(350, 440, 110)];\r\n        const enemies = [new Enemy(1000, 675, -1), new Enemy(1025, 530, 1)];\r\n        setEnemySprite(imgs.enemy);\r\n        const bullets = [];\r\n        enemies.forEach(enemy => bullets.push(enemy.getBullet()));\r\n        const collider = new Collider(\"collision1-1.png\", imgs.bg, scoreboard, light, this, rocks, bullets, enemies);\r\n        this.playing = false;\r\n        this.play = function (images, ctx, canvas) {\r\n            const this_ = this;\r\n            light.resetTimeout();\r\n            indie.vel.set(0, 0);\r\n            ctx.drawImage(images.score, 10, 260, 620, 130);\r\n            this_.ctx = ctx;\r\n            setInterval(function () {\r\n                [...rocks, ...bullets].forEach(el => {\r\n                    if (el.active) el.update();\r\n                })\r\n            }, 32);\r\n            camera.focus(indie.pos, 1);\r\n            scoreboard.takeLive();\r\n            scoreboard.updateScore();\r\n\r\n            function render() {\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 0, 640, 260);\r\n                ctx.drawImage(images.bg, camera.pos.x, camera.pos.y, 320, 125, 0, 0, 640, 250);\r\n                indie.draw(ctx, camera);\r\n                rocks.forEach(rock => {\r\n                    rock.draw(ctx, imgs.rock, camera);\r\n                })\r\n                enemies.forEach(enemy => {\r\n                    if (!enemy.dead) enemy.draw(ctx, camera);\r\n\r\n                });\r\n                bullets.forEach(bullet => {\r\n                    if (bullet.active) bullet.draw(ctx, camera)\r\n                });\r\n                if (light.alpha > 0) {\r\n                    ctx.fillStyle = \"rgba(0,0,0,\" + light.alpha + \")\";\r\n                    ctx.fillRect(0, 0, 640, 250);\r\n                }\r\n                if (light.alpha > 0.85 || scoreboard.hp <= 0 || scoreboard.lives <= 0) {\r\n                    this_.end(false, scoreboard.score);\r\n                }\r\n                if (scoreboard.needsUpdate) {\r\n                    scoreboard.draw(ctx);\r\n                    scoreboard.needsUpdate = false;\r\n                }\r\n                if (this_.playing) {\r\n                    requestAnimationFrame(render);\r\n                }\r\n            }\r\n\r\n            function update() {\r\n                if (this_.playing) {\r\n                    indie.update(collider, camera);\r\n                }\r\n            };\r\n            setInterval(update, 15);\r\n            render();\r\n        }\r\n    }\r\n    start(images, ctx, canvas) {\r\n        this.playing = true;\r\n        this.play(images, ctx, canvas);\r\n    }\r\n    end(win, score) {\r\n        this.playing = false;\r\n        let ctx = this.ctx;\r\n        let msg = win ? \"CONGRATULATIONS! YOU WIN!\" : \"YOU LOST\"\r\n        let s = \"SCORE: \" + score;\r\n        function endScreen() {\r\n            ctx.fillStyle = \"black\";\r\n            ctx.fillRect(0, 0, 640, 400);\r\n            ctx.fillStyle = \"#d0dc71\";\r\n            ctx.fillText(msg, 640 / 2, 400 * 0.65);\r\n            ctx.fillText(s, 640 / 2, 400 * 0.80);\r\n            requestAnimationFrame(endScreen)\r\n        }\r\n        endScreen();\r\n    }\r\n\r\n}","export default class Keyboard {\r\n    constructor() {\r\n        this.keyStates = new Map();\r\n        this.listeners = new Map();\r\n    }\r\n    handleEvent(e) {\r\n        const key = e.code;\r\n        if (!this.keyStates.has(key)) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        const keyState = e.type === 'keydown' ? 1 : 0;\r\n        if (this.keyStates.get(key) === keyState) return;\r\n        this.keyStates.set(key, keyState);\r\n        if(keyState === 1 && this.listeners.has(key)) this.listeners.get(key)()\r\n\r\n    }\r\n    listenTo(window) {\r\n        ['keydown', 'keyup'].forEach(eName => {\r\n            window.addEventListener(eName, e => {\r\n                this.handleEvent(e);\r\n            });\r\n        });\r\n        [\"KeyA\", \"KeyW\", \"KeyD\", \"KeyS\"].forEach(key => this.keyStates.set(key, 0));\r\n    }\r\n    setListener(key, listener) {\r\n        this.keyStates.set(key, 0);\r\n        this.listeners.set(key, listener);\r\n    }\r\n}","export default class Light {\r\n    constructor() {\r\n        this.alpha = 0;\r\n        this.timeout = 0;\r\n    }\r\n    updateAlpha() {\r\n        this.alpha += 0.1;\r\n        this.timeout = setTimeout(() => this.updateAlpha(), 10000);\r\n    }\r\n    resetAlpha() {\r\n        this.alpha = 0;\r\n    }\r\n    resetTimeout() {        \r\n        this.resetAlpha();        \r\n        clearTimeout(this.timeout);\r\n        this.timeout = setTimeout(() => this.updateAlpha(), 10000);\r\n    }\r\n}","import {\r\n    Vec2\r\n} from \"./math\";\r\n\r\nexport default class Rock {\r\n    constructor(x, y, range, speed = 2) {\r\n        this.startY = y;\r\n        this.pos = new Vec2(x, y);\r\n        this.range = range;\r\n        this.speed = speed;\r\n        this.alllowUpdate = true;\r\n        this.collided = false;\r\n        this.active = true;\r\n    }\r\n    update() {\r\n        if (this.alllowUpdate) {\r\n            if (this.pos.y - this.startY > this.range) {\r\n                this.pos.y = this.startY;\r\n                this.alllowUpdate = false;\r\n                this.collided = false;\r\n                setTimeout(() => {\r\n                    this.alllowUpdate = true\r\n                }, 1000)\r\n            } else this.pos.y = this.pos.y + this.speed;\r\n        }\r\n\r\n    }\r\n    draw(ctx, img, camera) {\r\n        if (this.alllowUpdate) {\r\n            if (((this.pos.y - camera.pos.y) * 2) < 250)\r\n                ctx.drawImage(img, (this.pos.x - camera.pos.x) * 2, (this.pos.y - camera.pos.y) * 2);\r\n        }\r\n    }\r\n}","export default class Scoreboard {\r\n    constructor(img) {\r\n        this.needsUpdate = true;\r\n        this.img = img;\r\n        this.hp = 100;\r\n        this.lives = 6;\r\n        this.whips = 0;\r\n        this.score = 0;\r\n    }\r\n    draw(ctx) {\r\n        ctx.drawImage(this.img, 10, 260, 620, 130);\r\n    }\r\n    addTorch(map, torchpos) {\r\n        let sbctx = this.img.getContext(\"2d\");\r\n        sbctx.fillStyle = \"black\";\r\n        sbctx.fillRect(135, 25, 20, 20);\r\n        sbctx.drawImage(map, torchpos.x, torchpos.y, 20, 20, 133, 25, 25, 25)\r\n        this.needsUpdate = true;\r\n    }\r\n    addCross(map) {\r\n        let sbctx = this.img.getContext(\"2d\");\r\n        sbctx.fillStyle = \"black\";\r\n        sbctx.drawImage(map, 880, 435, 18, 18, 173, 25, 25, 25);\r\n        this.needsUpdate = true;\r\n    }\r\n    takeHp() {\r\n        this.hp -= 20;\r\n        const ctx = this.img.getContext(\"2d\");\r\n        const offset = (this.hp / 100) * 44;\r\n        ctx.fillStyle = \"black\";\r\n        ctx.fillRect(56 + offset, 44, 44 - offset, 6)\r\n        this.needsUpdate = true;\r\n    }\r\n    takeLive() {\r\n        this.lives -= 1;\r\n        const ctx = this.img.getContext(\"2d\");\r\n        ctx.fillStyle = \"black\";\r\n        ctx.fillRect(35, 43, 7, 7);\r\n        ctx.fillStyle = \"green\";\r\n        ctx.font = \"8px Cousine, monospace\";\r\n        ctx.fillText(this.lives.toString(), 37, 49, 7);\r\n        this.needsUpdate = true;\r\n        this.needsUpdate = true;\r\n    }\r\n    setWhips(n) {\r\n        this.whips = n;\r\n        const ctx = this.img.getContext(\"2d\");\r\n        ctx.fillStyle = \"black\";\r\n        ctx.fillRect(113, 36, 7, 14);\r\n        ctx.fillStyle = \"white\";\r\n        ctx.font = \"13px Cousine, monospace\";\r\n        ctx.fillText(n.toString(), 114, 48, 6);\r\n        this.needsUpdate = true;\r\n    }\r\n    updateScore(n = 0) {\r\n        this.score += n;\r\n        let s = this.score.toString();\r\n        while (s.length < 6){\r\n            s = \"0\" + s;\r\n                }\r\n        \r\n        const ctx = this.img.getContext(\"2d\");\r\n        ctx.fillStyle = \"black\";\r\n        ctx.fillRect(56, 36, 44, 7);\r\n        ctx.fillStyle = \"white\";\r\n        ctx.font = \"9px Cousine, monospace\";\r\n        ctx.fillText(s, 57, 43, 44);\r\n        this.needsUpdate = true;\r\n    }\r\n\r\n}","export default class SpriteSet {\r\n    constructor(image, width, height) {\r\n        this.image = image;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.sprites = new Map();\r\n    }\r\n    define(name, x, y, width, height) {\r\n        const t = [];\r\n        [false, true].map(reverse => {\r\n            const buffer = document.createElement(\"canvas\");\r\n            buffer.width = width;\r\n            buffer.height = height;\r\n            const context = buffer.getContext(\"2d\");\r\n            if (reverse) {\r\n                context.translate(width, 0);\r\n                context.scale(-1, 1);\r\n            }\r\n            context.drawImage(\r\n                this.image,\r\n                x, y,\r\n                width, height,\r\n                0, 0,\r\n                width, height\r\n            )\r\n            t.push(buffer);\r\n        })\r\n        this.sprites.set(name, t);\r\n    }\r\n    defineAnim(spec) {        \r\n        for (let i = 0; i < spec.frames.length; i++) {\r\n            let f = spec.frames[i];\r\n            this.define(spec.name + i, f.pos.x, f.pos.y, f.width, f.height);\r\n        }\r\n    }\r\n    draw(name, context, x, y, reverse = false) {               \r\n        const buffer = this.sprites.get(name)\r\n        context.drawImage(buffer[reverse ? 1 : 0], x, y);\r\n    }\r\n}","import SpriteSet from \"./SpriteSet.js\"\r\nimport Keyboard from \"./Keyboard.js\";\r\nimport {\r\n    Vec2\r\n} from \"./math\";\r\nimport {\r\n    specs\r\n} from \"./specs.js\";\r\n\r\nexport function createIndie(image, sb) {\r\n    let scoreboard = sb;\r\n    const indie = {};\r\n    indie.pos = new Vec2(50, 320);\r\n    indie.vel = new Vec2(0, 0);\r\n    indie.size = new Vec2(15, 25);\r\n    indie.speed = 2.5;\r\n    indie.whips = 0;\r\n    const sprites = new SpriteSet(image, 30, 50);\r\n    sprites.define(\"idle\", 0, 0, 30, 50);\r\n    sprites.define(\"jump\", 81, 68, 34, 50);\r\n    sprites.define(\"crouch\", 80, 0, 35, 50);\r\n    sprites.defineAnim(specs.run);\r\n    sprites.defineAnim(specs.climb);\r\n    sprites.defineAnim(specs.attack);\r\n    console.log(sprites);\r\n    const input = new Keyboard();\r\n    let ropeMode = false;\r\n    let crouching = false;\r\n    let attacking = false;\r\n    input.listenTo(window);\r\n\r\n    input.setListener(\"KeyW\", e => {\r\n        if (ropeMode) {\r\n            return;\r\n        } else if (!indie.jumping && !(input.keyStates.get(\"KeyA\") || input.keyStates.get(\"KeyD\")) && !crouching) {\r\n            indie.vel.y = -10.5;\r\n            indie.jumping = true;\r\n        }\r\n\r\n    });\r\n    input.setListener(\"KeyE\", e => {\r\n        if (!indie.jumping && !crouching) {\r\n            ropeMode = false;\r\n            indie.vel.y = -10.5;\r\n            indie.vel.x = indie.speed;\r\n            indie.jumping = true;\r\n            indie.update()\r\n        }\r\n    });\r\n    input.setListener(\"KeyQ\", e => {\r\n        if (!indie.jumping && !crouching) {\r\n            ropeMode = false;\r\n            indie.vel.y = -10.5;\r\n            indie.vel.x = -indie.speed;\r\n            indie.jumping = true;\r\n            indie.update()\r\n        }\r\n    });\r\n    let attackingtimestamp = 0;\r\n    input.setListener(\"Space\", e => {\r\n        if (!crouching && !indie.jumping && !ropeMode && !attacking && indie.whips > 0) {\r\n            attacking = true;\r\n            attackingtimestamp = Date.now();\r\n            indie.whips--;\r\n            sb.setWhips(indie.whips)\r\n\r\n        }\r\n    });\r\n    let distance = 0;\r\n    const gravity = 1;\r\n    const resistance = 0.95;\r\n    indie.collisionPoints = {\r\n        y: [\r\n            new Vec2(),\r\n            new Vec2(),\r\n            new Vec2(),\r\n        ],\r\n        x: [\r\n            new Vec2(),\r\n            new Vec2(),\r\n            new Vec2(),\r\n            new Vec2(),\r\n        ],\r\n        center: new Vec2()\r\n    };\r\n    indie.updateCollisionPoints = function () {\r\n        this.collisionPoints.y[0].set(this.pos.x + this.size.x / 6 * 5, this.pos.y + this.size.y - 2);\r\n        this.collisionPoints.y[1].set(this.pos.x + this.size.x / 6, this.pos.y + this.size.y - 2);\r\n        this.collisionPoints.y[2].set(this.pos.x + this.size.x / 2, this.pos.y + 2)\r\n\r\n\r\n        this.collisionPoints.x[0].set(this.pos.x + 2, this.pos.y + this.size.y / 6 * 5);\r\n        this.collisionPoints.x[1].set(this.pos.x + 2, this.pos.y + this.size.y / 6);\r\n        this.collisionPoints.x[2].set(this.pos.x + this.size.x - 2, this.pos.y + this.size.y / 6 * 5);\r\n        this.collisionPoints.x[3].set(this.pos.x + this.size.x - 2, this.pos.y + this.size.y / 6);\r\n\r\n        this.collisionPoints.center.set(this.pos.x + this.size.x / 2, this.pos.y + this.size.y / 2);\r\n    }\r\n\r\n    let lastDir = 0;\r\n    indie.update = function (collider) {\r\n        if (!attacking) {\r\n            if (!ropeMode) {\r\n                if (!this.jumping) {\r\n                    if (input.keyStates.get(\"KeyS\")) {\r\n                        crouching = true;\r\n\r\n                    } else {\r\n                        this.vel.x = (-input.keyStates.get(\"KeyA\") + input.keyStates.get(\"KeyD\")) * this.speed;\r\n                        crouching = false;\r\n                    }\r\n                } else {\r\n                    this.vel.x *= resistance;\r\n                }\r\n                this.vel.y += gravity;\r\n                if (this.vel.y > 6) {\r\n                    this.vel.y = 2;\r\n                    this.jumping = true;\r\n                }\r\n\r\n            } else {\r\n                this.vel.x = 0;\r\n                this.vel.y = (-input.keyStates.get(\"KeyW\") + input.keyStates.get(\"KeyS\")) * 1.5;\r\n\r\n            }\r\n        } else {\r\n            this.vel.x = 0;\r\n            this.vel.y += gravity;\r\n            if (this.vel.y > 6) {\r\n                this.vel.y = 2;\r\n                this.jumping = true;\r\n            }\r\n        }\r\n        this.pos.x += this.vel.x;\r\n        this.pos.y += this.vel.y;\r\n\r\n        if (this.pos.x < 0) this.pos.x = 0;\r\n        if (this.pos.y < gravity) this.pos.y = gravity;\r\n        if (this.pos.x > 2115 - indie.size.x) this.pos.x = 2115 - indie.size.x;\r\n        if (this.pos.y > 709 - indie.size.y) indie.pos.y = 709 - indie.size.y;\r\n\r\n        if (collider) {\r\n            this.updateCollisionPoints();\r\n            const collision = collider.check(this.collisionPoints, attacking);\r\n            if (collision.rope) {\r\n                ropeMode = true;\r\n                this.jumping = false;\r\n                this.pos.x += 2 * this.vel.x;\r\n            } else {\r\n                ropeMode = false;\r\n                if (collision.x) {\r\n                    this.pos.x -= this.vel.x;\r\n                } else distance += Math.abs(this.vel.x);\r\n                if (collision.y) {\r\n                    this.pos.y -= this.vel.y;\r\n                    this.jumping = false;\r\n                }\r\n                if (collision.collected === \"whip\") this.whips += 5;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    let ropeDistance = 0;\r\n    indie.resolveFrame = function (len) {\r\n        if (attacking) {\r\n            if (Date.now() - attackingtimestamp < 240) {\r\n                let n = Math.floor((Date.now() - attackingtimestamp) / 60);                \r\n                return \"attack\" + n;\r\n            } else attacking = false;\r\n        }\r\n        if (crouching) {\r\n            return \"crouch\";\r\n        }\r\n        if (ropeMode) {\r\n            if (this.vel.y !== 0) {\r\n                let n = Math.floor((ropeDistance / (len * 2)) % specs.climb.frames.length);\r\n                ropeDistance += 1.5;\r\n                return \"climb\" + n;\r\n            }\r\n            return \"climb0\";\r\n\r\n        }\r\n        if (this.jumping) return \"jump\";\r\n        if (this.vel.x !== 0) {\r\n            let n = Math.floor((distance / len) % specs.run.frames.length);\r\n            return \"run\" + n;\r\n        }\r\n        return \"idle\";\r\n    }\r\n\r\n    indie.draw = function (ctx, camera) {        \r\n        const xDir = this.vel.x !== 0 ? parseInt(this.vel.x / Math.abs(this.vel.x)) : lastDir;\r\n        lastDir = xDir;\r\n        camera.focus(this.pos, {\r\n            x: xDir,\r\n            y: parseInt(this.vel.y)\r\n        });\r\n        camera.check();\r\n        const name = this.resolveFrame(5);\r\n        if (name.startsWith(\"atta\")) {\r\n            sprites.draw(name, ctx, (this.pos.x - camera.pos.x) * 2, (this.pos.y - 5 - camera.pos.y) * 2, xDir == -1);\r\n        } else {\r\n            sprites.draw(name, ctx, (this.pos.x - camera.pos.x) * 2, (this.pos.y - camera.pos.y) * 2, xDir == -1);\r\n        }\r\n        if (distance > 10000) distance = 0;\r\n    }\r\n    return indie;\r\n}","export function loadImage(url){\r\n    return new Promise(resolve =>{\r\n        const image = new Image();\r\n        image.addEventListener('load', () =>{\r\n            resolve(image);\r\n        });\r\n        image.src = \"images/\" + url;\r\n    })\r\n}","import {\r\n    loadImage\r\n} from \"./loaders.js\";\r\nimport Game from \"./Game.js\"\r\nimport SpriteSet from \"./SpriteSet.js\";\r\n\r\n\r\n\r\nconst map = document.createElement(\"canvas\");\r\nconst scoreboard = document.createElement(\"canvas\");\r\nconst IMAGES = [\"logo.png\", \"mapa.png\", \"sprites.png\", \"scoreboard.jpg\", \"collision1-1.png\", \"rock.png\", \"enemy.png\"];\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    const canvas = document.getElementById(\"screen\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.fillStyle = \"black\";\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    const imgs = [];\r\n    IMAGES.forEach(url => {\r\n        imgs.push(loadImage(url));\r\n    });\r\n    Promise.all(imgs).then(([logo, m, spriteSheet, scbrd, coll, rock, enemy]) => {\r\n        map.width = 2115;\r\n        map.height = 709;\r\n        map.getContext(\"2d\").drawImage(m, 0, 0, 2115, 709);\r\n        scoreboard.width = 269;\r\n        scoreboard.height = 57;\r\n        scoreboard.getContext(\"2d\").drawImage(scbrd, 0, 0, 269, 57);\r\n\r\n        ctx.drawImage(logo, 120, 30, 400, 126);\r\n        ctx.font = \"40px Cousine, monospace\";\r\n        ctx.textAlign = \"center\";\r\n        let text = false;\r\n        let start = false;\r\n        let ts;\r\n\r\n        function startScreen() {\r\n            if (text) {\r\n                ctx.fillStyle = \"#d0dc71\";\r\n                ctx.fillText(\"PRESS ENTER TO START\", canvas.width / 2, canvas.height * 0.65);\r\n            } else {\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 200, canvas.width, canvas.height);\r\n            }\r\n            if (!start) {\r\n                ts = requestAnimationFrame(startScreen);\r\n            } else {\r\n                cancelAnimationFrame(ts);\r\n\r\n            }\r\n        };\r\n        setInterval(() => text = !text, 1000);\r\n        \r\n        ts = requestAnimationFrame(startScreen);\r\n        const gameImgs = {\r\n            bg: map,\r\n            score: scoreboard,\r\n            rock: rock,\r\n            enemy: enemy\r\n\r\n        }\r\n        const game = new Game(spriteSheet, gameImgs);\r\n        window.addEventListener(\"keydown\", e => {\r\n            let start = false\r\n            if (e.key == \"Enter\" && !start) {\r\n                start = true;\r\n                cancelAnimationFrame(ts);\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n                game.start(gameImgs, ctx, canvas);\r\n                start = true;\r\n            }\r\n        });\r\n    });\r\n});","export class Vec2 {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    clone() {\r\n        return new Vec2(this.x, this.y);\r\n    }\r\n}","export const specs = {\r\n    run: {\r\n        \"name\": \"run\",\r\n        \"frames\": [{\r\n            \"pos\": {\r\n                \"x\": 120,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 25,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 180,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 25,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 240,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 280,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 350,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 25,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 410,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 449,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 488,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }]\r\n    },\r\n    climb: {\r\n        \"name\": \"climb\",\r\n        \"frames\": [{\r\n            \"pos\": {\r\n                \"x\": 217,\r\n                \"y\": 64\r\n            },\r\n            \"width\": 20,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 250,\r\n                \"y\": 64\r\n            },\r\n            \"width\": 20,\r\n            \"height\": 50\r\n        }]\r\n    },\r\n    attack: {\r\n        \"name\": \"attack\",\r\n        \"frames\": [{\r\n            \"pos\": {\r\n                \"x\": 45,\r\n                \"y\": 123\r\n            },\r\n            \"width\": 40,\r\n            \"height\": 60\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 85,\r\n                \"y\": 123\r\n            },\r\n            \"width\": 45,\r\n            \"height\": 60\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 135,\r\n                \"y\": 123\r\n            },\r\n            \"width\": 66,\r\n            \"height\": 60\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 201,\r\n                \"y\": 123\r\n            },\r\n            \"width\": 79,\r\n            \"height\": 60\r\n        }, ]\r\n    }\r\n}"],"sourceRoot":""}