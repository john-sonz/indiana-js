{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Camera.js","webpack:///./src/js/Collider.js","webpack:///./src/js/Entity.js","webpack:///./src/js/Game.js","webpack:///./src/js/Keyboard.js","webpack:///./src/js/SpriteSet.js","webpack:///./src/js/entities.js","webpack:///./src/js/loaders.js","webpack:///./src/js/main.js","webpack:///./src/js/math.js"],"names":["Camera","pos","size","dir","x","y","Collider","imgsrc","collisionMap","document","createElement","img","Image","src","width","height","console","log","getContext","drawImage","context","positions","vert","hori","p","getImageData","data","color","Entity","vel","Game","spriteSheet","indie","gravity","camera","collider","play","images","ctx","canvas","this_","set","render","fillStyle","fillRect","bg","score","update","draw","requestAnimationFrame","Keyboard","keyStates","Map","e","key","code","has","preventDefault","keyState","type","get","window","forEach","addEventListener","eName","handleEvent","SpriteSet","image","sprites","name","buffer","createIndie","speed","define","input","listenTo","getCollisionPoints","collision","check","focus","parseInt","beginPath","arc","Math","PI","closePath","fill","loadImage","url","Promise","resolve","IMAGES","getElementById","imgs","push","all","then","logo","map","scoreboard","coll","font","textAlign","text","start","startScreen","fillText","setInterval","ts","game","gameImgs","cancelAnimationFrame","Vec2"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/main.js\");\n","import {\r\n    Vec2\r\n} from \"./math\";\r\n\r\nexport default class Camera {\r\n    constructor() {\r\n        this.pos = new Vec2(0, 0);\r\n        this.size = new Vec2(2115 - 320, 709 - 125);\r\n    }\r\n    focus(pos, dir) {\r\n        if (dir.x > 0) {\r\n            if(pos.x - this.pos.x >= 200) this.pos.x = pos.x - 200;\r\n        } else if (dir.x < 0){\r\n            if(pos.x - this.pos.x <= 100) this.pos.x = pos.x - 100;\r\n        }        \r\n        this.pos.y = pos.y - 25;\r\n    }\r\n    check() {\r\n        if (this.pos.x > this.size.x) this.pos.x = this.size.x;\r\n        if (this.pos.y > this.size.y) this.pos.y = this.size.y;\r\n        if (this.pos.x < 0) this.pos.x = 0;\r\n        if (this.pos.y < 0) this.pos.y = 0;\r\n    }\r\n}","export default class Collider {\r\n    constructor(imgsrc) {\r\n        this.collisionMap = document.createElement(\"canvas\");\r\n        const img = new Image();\r\n        img.src = \"images/\" + imgsrc;\r\n        this.collisionMap.width = img.width;\r\n        this.collisionMap.height = img.height;\r\n        console.log(this.collisionMap.width, this.collisionMap.height);\r\n        this.collisionMap.getContext(\"2d\").drawImage(\r\n            img,\r\n            0, 0,\r\n            this.collisionMap.width, this.collisionMap.height);\r\n        this.context = this.collisionMap.getContext(\"2d\");\r\n    }\r\n    check(positions) {\r\n        let vert = false;\r\n        let hori = false;\r\n        for (const pos of positions.y) {\r\n            let p = this.context.getImageData(pos.x, pos.y, 1, 1).data;\r\n            const color = p[0] + \" \" + p[1] + \" \" + p[2] + \" \" + p[3];\r\n            if (color === \"0 0 0 255\") {\r\n                vert = true;\r\n                break;\r\n            }\r\n            if (color === \"237 119 15 255\") {\r\n                vert = true;\r\n                break;\r\n            }\r\n        }\r\n        for (const pos of positions.x) {\r\n            let p = this.context.getImageData(pos.x, pos.y, 1, 1).data;\r\n            const color = p[0] + \" \" + p[1] + \" \" + p[2] + \" \" + p[3];\r\n            if (color === \"0 0 0 255\") {\r\n                hori = true;\r\n                break;\r\n            }\r\n        }\r\n        return {\r\n            x: hori,\r\n            y: vert\r\n        }\r\n    }\r\n}","import { Vec2 } from \"./math\";\r\n\r\nexport default class Entity{\r\n    constructor(){\r\n        this.pos = new Vec2(0,0);\r\n        this.vel = new Vec2(0,0);\r\n    }\r\n}","import {\r\n    createIndie\r\n} from \"./entities.js\";\r\nimport Camera from \"./Camera.js\";\r\nimport Collider from \"./Collider.js\";\r\n\r\n\r\nexport default class Game {\r\n    constructor(spriteSheet) {\r\n        const indie = createIndie(spriteSheet);\r\n        const gravity = 0.3;\r\n        const camera = new Camera();\r\n        const collider = new Collider(\"collision1-1.png\");        \r\n        this.play = function (images, ctx, canvas) {\r\n            const this_ = this;\r\n            indie.vel.set(0, 0);\r\n\r\n            function render() {\r\n                ctx.fillStyle = \"green\";\r\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n                ctx.drawImage(images.bg, camera.pos.x, camera.pos.y, 320, 125, 0, 0, 640, 250);\r\n\r\n                ctx.drawImage(images.score, 10, 260, 620, 130);\r\n\r\n                indie.update(collider);\r\n                indie.draw(ctx, camera);\r\n                requestAnimationFrame(render);\r\n            }\r\n            render();\r\n        }\r\n    }\r\n    start(images, ctx, canvas) {\r\n        this.play(images, ctx, canvas);\r\n    }\r\n}","export default class Keyboard {\r\n    constructor() {\r\n        this.keyStates = new Map();\r\n\r\n    }\r\n    handleEvent(e) {\r\n        const key = e.code;\r\n        if (!this.keyStates.has(key)) {\r\n            return;\r\n        }\r\n        e.preventDefault();        \r\n        const keyState = e.type === 'keydown' ? 1 : 0;\r\n        if (this.keyStates.get(key) === keyState) return;\r\n        this.keyStates.set(key, keyState);\r\n\r\n    }\r\n    listenTo(window) {\r\n        ['keydown', 'keyup'].forEach(eName => {\r\n            window.addEventListener(eName, e => {\r\n                this.handleEvent(e);\r\n            });\r\n        });\r\n        [\"KeyA\",\"KeyW\",\"KeyD\",\"KeyS\"].forEach(key => this.keyStates.set(key,0));\r\n\r\n    }\r\n}","export default class SpriteSet {\r\n    constructor(image, width, height) {\r\n        this.image = image;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.sprites = new Map();\r\n    }\r\n    define(name, x, y, width, height) {\r\n        const buffer = document.createElement(\"canvas\");\r\n        buffer.width = width;\r\n        buffer.height = height;\r\n        buffer.getContext(\"2d\").drawImage(\r\n            this.image,\r\n            x, y,\r\n            width, height,\r\n            0, 0,\r\n            width, height\r\n        )\r\n        this.sprites.set(name, buffer);\r\n    }\r\n    draw(name, context, x, y) {\r\n        const buffer = this.sprites.get(name)\r\n        context.drawImage(buffer, x, y);\r\n    }\r\n}","import Entity from \"./Entity\";\r\nimport SpriteSet from \"./SpriteSet.js\"\r\nimport Keyboard from \"./Keyboard.js\";\r\nimport {\r\n    Vec2\r\n} from \"./math\";\r\nexport function createIndie(image) {\r\n    const indie = new Entity();\r\n    indie.pos.set(50, 330);\r\n    indie.speed = 2;\r\n    indie.size = new Vec2(15, 25);\r\n    const sprites = new SpriteSet(image, 30, 50);\r\n    sprites.define(\"idle\", 0, 0, 30, 50);\r\n    const input = new Keyboard();\r\n    input.listenTo(window);\r\n    const gravity = 3;\r\n    indie.getCollisionPoints = function () {\r\n        return {\r\n            y: [\r\n                new Vec2(this.pos.x + this.size.x / 6 * 5, this.pos.y + this.size.y),\r\n                new Vec2(this.pos.x + this.size.x / 6, this.pos.y + this.size.y),\r\n                new Vec2(this.pos.x + this.size.x / 6 * 5, this.pos.y),\r\n                new Vec2(this.pos.x + this.size.x / 6, this.pos.y)               \r\n\r\n            ],\r\n            x: [\r\n                new Vec2(this.pos.x, this.pos.y + this.size.y / 6 * 5),                \r\n                new Vec2(this.pos.x, this.pos.y + this.size.y / 6),\r\n                new Vec2(this.pos.x + this.size.x, this.pos.y + this.size.y / 6 * 5),                \r\n                new Vec2(this.pos.x + this.size.x, this.pos.y + this.size.y / 6),\r\n            ]\r\n        }\r\n    }\r\n    indie.update = function (collider) {\r\n        this.vel.x = (-input.keyStates.get(\"KeyA\") + input.keyStates.get(\"KeyD\")) * this.speed;\r\n        this.vel.y = (-input.keyStates.get(\"KeyW\") + input.keyStates.get(\"KeyS\")) * 5;\r\n        this.vel.y += 0.5;\r\n        this.pos.x += this.vel.x;\r\n        this.pos.y += this.vel.y;\r\n        if (this.pos.x < 0) this.pos.x = 0;\r\n        if (this.pos.y < gravity) this.pos.y = gravity;\r\n        if (this.pos.x > 2115 - indie.size.x) this.pos.x = 2115 - indie.size.x;\r\n        if (this.pos.y > 709 - indie.size.y) indie.pos.y = 709 - indie.size.y;\r\n        const collision = collider.check(this.getCollisionPoints());\r\n        if (collision.x) this.pos.x -= this.vel.x;\r\n        if (collision.y) this.pos.y -= this.vel.y;\r\n        else{\r\n            this.pos.y += gravity;\r\n        }\r\n\r\n\r\n    }\r\n    indie.draw = function (ctx, camera) {\r\n        camera.focus(this.pos, {\r\n            x: parseInt(this.vel.x / this.speed),\r\n            y: parseInt(this.vel.y / this.speed)\r\n        });\r\n        camera.check();\r\n        sprites.draw(\"idle\", ctx, (this.pos.x - camera.pos.x) * 2, (this.pos.y - camera.pos.y) * 2);\r\n        const p = this.getCollisionPoints();\r\n        [...p.x, ...p.y].forEach(pos => {\r\n            ctx.beginPath();\r\n            ctx.arc((pos.x - camera.pos.x) * 2, (pos.y - camera.pos.y) * 2, 2, 0, 2 * Math.PI);\r\n            ctx.closePath();\r\n            ctx.fillStyle = \"white\";\r\n            ctx.fill();\r\n        });\r\n    }\r\n    return indie;\r\n}","export function loadImage(url){\r\n    return new Promise(resolve =>{\r\n        const image = new Image();\r\n        image.addEventListener('load', () =>{\r\n            resolve(image);\r\n        });\r\n        image.src = \"images/\" + url;\r\n    })\r\n}","import {\r\n    loadImage\r\n} from \"./loaders.js\";\r\nimport Game from \"./Game.js\"\r\nimport SpriteSet from \"./SpriteSet.js\";\r\n\r\nconst IMAGES = [\"logo.png\", \"mapa.png\", \"sprites.png\", \"scoreboard.jpg\", \"collision1-1.png\"];\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    const canvas = document.getElementById(\"screen\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.fillStyle = \"black\";\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    const imgs = [];\r\n    IMAGES.forEach(url => {\r\n        imgs.push(loadImage(url));\r\n    });\r\n    Promise.all(imgs).then(([logo, map, spriteSheet, scoreboard, coll]) => {\r\n        ctx.drawImage(logo, 120, 30, 400, 126);\r\n        ctx.font = \"40px Cousine, monospace\";\r\n        ctx.textAlign = \"center\";\r\n        let text = false;\r\n        let start = false;\r\n\r\n        function startScreen() {\r\n            if (text) {\r\n                ctx.fillStyle = \"#d0dc71\";\r\n                ctx.fillText(\"PRESS ENTER TO START\", canvas.width / 2, canvas.height * 0.65);\r\n            } else {\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 200, canvas.width, canvas.height);\r\n            }\r\n            if (!start) {\r\n                requestAnimationFrame(startScreen);\r\n            } else {\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 200, canvas.width, canvas.height);\r\n            }\r\n        };\r\n        setInterval(() => text = !text, 1000);\r\n        let ts = requestAnimationFrame(startScreen);\r\n        const game = new Game(spriteSheet);\r\n        const gameImgs = {\r\n            bg: coll,\r\n            score: scoreboard\r\n        }\r\n        \r\n        window.addEventListener(\"keydown\", e => {\r\n            if (e.key == \"Enter\") {\r\n                start = true;\r\n                cancelAnimationFrame(ts)\r\n                game.start(gameImgs, ctx, canvas);\r\n            }\r\n        });\r\n    });\r\n});","export class Vec2 {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    clone() {\r\n        return new Vec2(this.x, this.y);\r\n    }\r\n}"],"sourceRoot":""}