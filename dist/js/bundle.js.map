{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Camera.js","webpack:///./src/js/Collider.js","webpack:///./src/js/Entity.js","webpack:///./src/js/Game.js","webpack:///./src/js/Keyboard.js","webpack:///./src/js/SpriteSet.js","webpack:///./src/js/entities.js","webpack:///./src/js/loaders.js","webpack:///./src/js/main.js","webpack:///./src/js/math.js","webpack:///./src/js/specs.js"],"names":["Camera","pos","size","dir","x","y","Collider","imgsrc","collisionMap","document","createElement","img","Image","src","width","height","console","log","getContext","drawImage","context","positions","vert","hori","rope","p","getImageData","parseInt","data","color","Entity","vel","Game","spriteSheet","indie","gravity","camera","collider","playing","play","images","ctx","canvas","this_","set","score","render","fillStyle","fillRect","bg","draw","requestAnimationFrame","update","setInterval","endScreen","fillText","Keyboard","keyStates","Map","listeners","e","key","code","has","preventDefault","keyState","type","get","window","forEach","addEventListener","eName","handleEvent","listener","SpriteSet","image","sprites","name","t","map","buffer","reverse","translate","scale","push","spec","i","frames","length","f","define","createIndie","speed","defineAnim","run","climb","input","ropeMode","listenTo","setListener","jumping","distance","resistance","collisionPoints","updateCollisionPoints","collision","check","Math","abs","lastDir","ropeDistance","resolveFrame","len","n","floor","xDir","focus","loadImage","url","Promise","resolve","IMAGES","getElementById","imgs","all","then","logo","scoreboard","coll","font","textAlign","text","start","ts","startScreen","cancelAnimationFrame","game","gameImgs","Vec2","specs"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/main.js\");\n","import {\r\n    Vec2\r\n} from \"./math\";\r\n\r\nexport default class Camera {\r\n    constructor() {\r\n        this.pos = new Vec2(0, 0);\r\n        this.size = new Vec2(2115 - 320, 709 - 125);\r\n    }\r\n    focus(pos, dir) {    \r\n        if (dir.x > 0) {\r\n            if(pos.x - this.pos.x >= 200) this.pos.x = pos.x - 200;\r\n        } else if (dir.x < 0){\r\n            if(pos.x - this.pos.x <= 100) this.pos.x = pos.x - 100;\r\n        }        \r\n        this.pos.y = pos.y - 25;\r\n    }\r\n    check() {\r\n        if (this.pos.x > this.size.x) this.pos.x = this.size.x;\r\n        if (this.pos.y > this.size.y) this.pos.y = this.size.y;\r\n        if (this.pos.x < 0) this.pos.x = 0;\r\n        if (this.pos.y < 0) this.pos.y = 0;\r\n    }\r\n}","export default class Collider {\r\n    constructor(imgsrc) {\r\n        this.collisionMap = document.createElement(\"canvas\");\r\n        const img = new Image();\r\n        img.src = \"images/\" + imgsrc;\r\n        this.collisionMap.width = img.width;\r\n        this.collisionMap.height = img.height;\r\n        console.log(this.collisionMap.width, this.collisionMap.height);\r\n        this.collisionMap.getContext(\"2d\").drawImage(\r\n            img,\r\n            0, 0,\r\n            this.collisionMap.width, this.collisionMap.height);\r\n        this.context = this.collisionMap.getContext(\"2d\");\r\n    }\r\n    check(positions) {\r\n        let vert = false;\r\n        let hori = false;\r\n        let rope = false;\r\n        for (const pos of positions.y) {\r\n            let p = this.context.getImageData(parseInt(pos.x), parseInt(pos.y), 1, 1).data;\r\n            const color = p[0] + \" \" + p[1] + \" \" + p[2] + \" \" + p[3];\r\n            if (p[3] === 255) {\r\n                if (color === \"255 255 255 255\") {\r\n                    return {\r\n                        x: hori,\r\n                        y: vert,\r\n                        rope: true\r\n                    };\r\n\r\n                }\r\n                if (color === \"0 0 0 255\") {\r\n                    vert = true;\r\n                    break;\r\n                }\r\n                if (color === \"237 119 15 255\") {\r\n                    vert = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n        for (const pos of positions.x) {\r\n            let p = this.context.getImageData(pos.x, pos.y, 1, 1).data;\r\n            const color = p[0] + \" \" + p[1] + \" \" + p[2] + \" \" + p[3];\r\n            if (p[3] === 255) {\r\n\r\n                if (color === \"255 255 255 255\") {\r\n                    return {\r\n                        x: hori,\r\n                        y: vert,\r\n                        rope: true\r\n                    };\r\n\r\n                }\r\n                if (color === \"0 0 0 255\") {\r\n                    hori = true;\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n        return {\r\n            x: hori,\r\n            y: vert,\r\n            rope: rope\r\n        }\r\n    }\r\n}","import { Vec2 } from \"./math\";\r\n\r\nexport default class Entity{\r\n    constructor(){\r\n        this.pos = new Vec2(0,0);\r\n        this.vel = new Vec2(0,0);\r\n    }\r\n}","import {\r\n    createIndie\r\n} from \"./entities.js\";\r\nimport Camera from \"./Camera.js\";\r\nimport Collider from \"./Collider.js\";\r\n\r\n\r\nexport default class Game {\r\n    constructor(spriteSheet) {\r\n        const indie = createIndie(spriteSheet);\r\n        const gravity = 0.3;\r\n        const camera = new Camera();\r\n        const collider = new Collider(\"collision1-1.png\");\r\n        this.playing = false;\r\n        this.play = function (images, ctx, canvas) {\r\n            const this_ = this;\r\n            indie.vel.set(0, 0);\r\n            ctx.drawImage(images.score, 10, 260, 620, 130);\r\n\r\n            function render() {\r\n                ctx.fillStyle = \"green\";\r\n                ctx.fillRect(0, 0, 640, 250);\r\n                ctx.drawImage(images.bg, camera.pos.x, camera.pos.y, 320, 125, 0, 0, 640, 250);\r\n                indie.draw(ctx, camera);\r\n\r\n                if (this.playing) {\r\n                    requestAnimationFrame(render);\r\n                }\r\n            }\r\n\r\n            function update() {\r\n                if (this.playing) {\r\n                    indie.update(collider, camera);\r\n                }\r\n            };\r\n            setInterval(update, 15);\r\n            render();\r\n        }\r\n    }\r\n    start(images, ctx, canvas) {\r\n        this.playing = false;\r\n        this.play(images, ctx, canvas);\r\n    }\r\n    end(ctx) {\r\n        function endScreen() {\r\n            ctx.fillStyle = \"black\";\r\n            ctx.fillRect(0, 0, 640, 400);\r\n            ctx.fillStyle = \"#d0dc71\";\r\n            ctx.fillText(\"YOU LOST\", 640 / 2, 400 * 0.65);\r\n            requestAnimationFrame(endScreen)\r\n        }\r\n        endScreen();\r\n    }\r\n}","export default class Keyboard {\r\n    constructor() {\r\n        this.keyStates = new Map();\r\n        this.listeners = new Map();\r\n    }\r\n    handleEvent(e) {\r\n        const key = e.code;\r\n        if (!this.keyStates.has(key)) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        const keyState = e.type === 'keydown' ? 1 : 0;\r\n        if (this.keyStates.get(key) === keyState) return;\r\n        this.keyStates.set(key, keyState);\r\n        if(keyState === 1 && this.listeners.has(key)) this.listeners.get(key)()\r\n\r\n    }\r\n    listenTo(window) {\r\n        ['keydown', 'keyup'].forEach(eName => {\r\n            window.addEventListener(eName, e => {\r\n                this.handleEvent(e);\r\n            });\r\n        });\r\n        [\"KeyA\", \"KeyW\", \"KeyD\", \"KeyS\"].forEach(key => this.keyStates.set(key, 0));\r\n    }\r\n    setListener(key, listener) {\r\n        this.keyStates.set(key, 0);\r\n        this.listeners.set(key, listener);\r\n    }\r\n}","export default class SpriteSet {\r\n    constructor(image, width, height) {\r\n        this.image = image;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.sprites = new Map();\r\n    }\r\n    define(name, x, y, width, height) {\r\n        const t = [];\r\n        [false, true].map(reverse => {\r\n            const buffer = document.createElement(\"canvas\");\r\n            buffer.width = width;\r\n            buffer.height = height;\r\n            const context = buffer.getContext(\"2d\");\r\n            if (reverse) {\r\n                context.translate(width, 0);\r\n                context.scale(-1, 1);\r\n            }\r\n            context.drawImage(\r\n                this.image,\r\n                x, y,\r\n                width, height,\r\n                0, 0,\r\n                width, height\r\n            )\r\n            t.push(buffer);\r\n        })\r\n        this.sprites.set(name, t);\r\n    }\r\n    defineAnim(spec) {        \r\n        for (let i = 0; i < spec.frames.length; i++) {\r\n            let f = spec.frames[i];\r\n            this.define(spec.name + i, f.pos.x, f.pos.y, f.width, f.height);\r\n        }\r\n    }\r\n    draw(name, context, x, y, reverse = false) {\r\n        const buffer = this.sprites.get(name)\r\n        context.drawImage(buffer[reverse ? 1 : 0], x, y);\r\n    }\r\n}","import Entity from \"./Entity\";\r\nimport SpriteSet from \"./SpriteSet.js\"\r\nimport Keyboard from \"./Keyboard.js\";\r\nimport {\r\n    Vec2\r\n} from \"./math\";\r\nimport {\r\n    specs\r\n} from \"./specs.js\";\r\n\r\nexport function createIndie(image) {\r\n    const indie = new Entity();\r\n    indie.pos.set(50, 330);\r\n    indie.speed = 2.5;\r\n    indie.size = new Vec2(15, 25);\r\n    const sprites = new SpriteSet(image, 30, 50);\r\n    sprites.define(\"idle\", 0, 0, 30, 50);\r\n    sprites.define(\"jump\", 81, 68, 34, 50);\r\n    sprites.defineAnim(specs.run);\r\n    sprites.defineAnim(specs.climb);\r\n    console.log(sprites);\r\n    const input = new Keyboard();\r\n    let ropeMode = false;\r\n    input.listenTo(window);\r\n\r\n    input.setListener(\"KeyW\", e => {\r\n        if (ropeMode) {\r\n            return;\r\n        } else if (!indie.jumping && !(input.keyStates.get(\"KeyA\") || input.keyStates.get(\"KeyD\"))) {\r\n            indie.vel.y = -9.5;\r\n            indie.jumping = true;\r\n        }\r\n\r\n    });\r\n    input.setListener(\"KeyE\", e => {\r\n        if (!indie.jumping) {\r\n            ropeMode = false;\r\n            indie.vel.y = -9.5;\r\n            indie.vel.x = indie.speed;\r\n            indie.jumping = true;\r\n            indie.update()\r\n        }\r\n    });\r\n    input.setListener(\"KeyQ\", e => {\r\n        if (!indie.jumping) {\r\n            ropeMode = false;\r\n            indie.vel.y = -9.5;\r\n            indie.vel.x = -indie.speed;\r\n            indie.jumping = true;\r\n            indie.update()\r\n        }\r\n    });\r\n    let distance = 0;\r\n    const gravity = 1;\r\n    const resistance = 0.95;\r\n    indie.collisionPoints = {\r\n        y: [\r\n            new Vec2(),\r\n            new Vec2(),\r\n            new Vec2(),\r\n        ],\r\n        x: [\r\n            new Vec2(),\r\n            new Vec2(),\r\n            new Vec2(),\r\n            new Vec2(),\r\n        ]\r\n    };\r\n    indie.updateCollisionPoints = function () {\r\n        this.collisionPoints.y[0].set(this.pos.x + this.size.x / 6 * 5, this.pos.y + this.size.y - 2);\r\n        this.collisionPoints.y[1].set(this.pos.x + this.size.x / 6, this.pos.y + this.size.y - 2);\r\n        this.collisionPoints.y[2].set(this.pos.x + this.size.x / 2, this.pos.y + 2)\r\n\r\n\r\n        this.collisionPoints.x[0].set(this.pos.x + 2, this.pos.y + this.size.y / 6 * 5);\r\n        this.collisionPoints.x[1].set(this.pos.x + 2, this.pos.y + this.size.y / 6);\r\n        this.collisionPoints.x[2].set(this.pos.x + this.size.x - 2, this.pos.y + this.size.y / 6 * 5);\r\n        this.collisionPoints.x[3].set(this.pos.x + this.size.x - 2, this.pos.y + this.size.y / 6);\r\n\r\n    }\r\n    indie.update = function (collider) {\r\n        if (!ropeMode) {\r\n            if (!this.jumping) {\r\n                this.vel.x = (-input.keyStates.get(\"KeyA\") + input.keyStates.get(\"KeyD\")) * this.speed;\r\n            } else {\r\n                this.vel.x *= resistance;\r\n            }\r\n            this.vel.y += gravity;\r\n            if (this.vel.y > 6) {\r\n                this.vel.y = 2;\r\n                this.jumping = true;\r\n            }\r\n\r\n        } else {\r\n            this.vel.x = 0;\r\n            this.vel.y = (-input.keyStates.get(\"KeyW\") + input.keyStates.get(\"KeyS\")) * 1.5;\r\n\r\n        }\r\n        this.pos.x += this.vel.x;\r\n        this.pos.y += this.vel.y;\r\n\r\n        if (this.pos.x < 0) this.pos.x = 0;\r\n        if (this.pos.y < gravity) this.pos.y = gravity;\r\n        if (this.pos.x > 2115 - indie.size.x) this.pos.x = 2115 - indie.size.x;\r\n        if (this.pos.y > 709 - indie.size.y) indie.pos.y = 709 - indie.size.y;\r\n\r\n        if (collider) {\r\n            this.updateCollisionPoints();\r\n            const collision = collider.check(this.collisionPoints);\r\n            if (collision.rope) {\r\n                ropeMode = true;\r\n                this.jumping = false;\r\n                this.pos.x += 2 * this.vel.x;\r\n            } else {\r\n                ropeMode = false;\r\n                if (collision.x) {\r\n                    this.pos.x -= this.vel.x;\r\n                } else distance += Math.abs(this.vel.x);\r\n                if (collision.y) {\r\n                    this.pos.y -= this.vel.y;\r\n                    this.jumping = false;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    let lastDir = 0;\r\n    let ropeDistance = 0;\r\n    indie.resolveFrame = function (len) {\r\n        if (ropeMode) {\r\n            if (this.vel.y !== 0) {\r\n                let n = Math.floor((distance / (len * 2)) % specs.climb.frames.length);\r\n                distance += 1.5;\r\n                return \"climb\" + n;\r\n            }\r\n            return \"climb0\";\r\n\r\n        }\r\n        if (this.jumping) return \"jump\";\r\n        if (this.vel.x !== 0) {\r\n            let n = Math.floor((distance / len) % specs.run.frames.length);\r\n            return \"run\" + n;\r\n        }\r\n        return \"idle\";\r\n    }\r\n\r\n    indie.draw = function (ctx, camera) {\r\n        const xDir = this.vel.x !== 0 ? parseInt(this.vel.x / Math.abs(this.vel.x)) : lastDir;\r\n        lastDir = xDir;\r\n\r\n\r\n        camera.focus(this.pos, {\r\n            x: xDir,\r\n            y: parseInt(this.vel.y)\r\n        });\r\n        camera.check();\r\n        sprites.draw(this.resolveFrame(5), ctx, (this.pos.x - camera.pos.x) * 2, (this.pos.y - camera.pos.y) * 2, xDir == -1);\r\n        if (distance > 10000) distance = 0;\r\n    }\r\n    return indie;\r\n}","export function loadImage(url){\r\n    return new Promise(resolve =>{\r\n        const image = new Image();\r\n        image.addEventListener('load', () =>{\r\n            resolve(image);\r\n        });\r\n        image.src = \"images/\" + url;\r\n    })\r\n}","import {\r\n    loadImage\r\n} from \"./loaders.js\";\r\nimport Game from \"./Game.js\"\r\nimport SpriteSet from \"./SpriteSet.js\";\r\n\r\nconst IMAGES = [\"logo.png\", \"mapa.png\", \"sprites.png\", \"scoreboard.jpg\", \"collision1-1.png\"];\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    const canvas = document.getElementById(\"screen\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.fillStyle = \"black\";\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    const imgs = [];\r\n    IMAGES.forEach(url => {\r\n        imgs.push(loadImage(url));\r\n    });\r\n    Promise.all(imgs).then(([logo, map, spriteSheet, scoreboard, coll]) => {\r\n        ctx.drawImage(logo, 120, 30, 400, 126);\r\n        ctx.font = \"40px Cousine, monospace\";\r\n        ctx.textAlign = \"center\";\r\n        let text = false;\r\n        let start = false;\r\n        let ts;\r\n        function startScreen() {\r\n            if (text) {\r\n                ctx.fillStyle = \"#d0dc71\";\r\n                ctx.fillText(\"PRESS ENTER TO START\", canvas.width / 2, canvas.height * 0.65);\r\n            } else {\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 200, canvas.width, canvas.height);\r\n            }\r\n            if (!start) {\r\n                ts = requestAnimationFrame(startScreen);\r\n            } else {\r\n                cancelAnimationFrame(ts);               \r\n                          \r\n            }\r\n        };\r\n        setInterval(() => text = !text, 1000);\r\n        ts = requestAnimationFrame(startScreen);\r\n        const game = new Game(spriteSheet);\r\n        const gameImgs = {\r\n            bg: coll,\r\n            score: scoreboard\r\n        }\r\n        \r\n        window.addEventListener(\"keydown\", e => {\r\n            if (e.key == \"Enter\") {\r\n                start = true;      \r\n                cancelAnimationFrame(ts);\r\n                ctx.fillStyle = \"black\";\r\n                ctx.fillRect(0, 0, canvas.width, canvas.height);          \r\n                game.start(gameImgs, ctx, canvas);\r\n            }\r\n        });\r\n    });\r\n});","export class Vec2 {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    clone() {\r\n        return new Vec2(this.x, this.y);\r\n    }\r\n}","export const specs = {\r\n    run: {\r\n        \"name\": \"run\",\r\n        \"frames\": [{\r\n            \"pos\": {\r\n                \"x\": 120,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 25,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 180,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 25,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 240,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 280,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 350,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 25,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 410,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 449,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 488,\r\n                \"y\": 0\r\n            },\r\n            \"width\": 30,\r\n            \"height\": 50\r\n        }]\r\n    },\r\n    climb: {\r\n        \"name\": \"climb\",\r\n        \"frames\": [{\r\n            \"pos\": {\r\n                \"x\": 217,\r\n                \"y\": 64\r\n            },\r\n            \"width\": 20,\r\n            \"height\": 50\r\n        }, {\r\n            \"pos\": {\r\n                \"x\": 250,\r\n                \"y\": 64\r\n            },\r\n            \"width\": 20,\r\n            \"height\": 50\r\n        }]\r\n    }\r\n}"],"sourceRoot":""}